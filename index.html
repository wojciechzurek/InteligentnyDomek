<!DOCTYPE HTML>
<html>
	<head>
		<title> Inteligentny Dom </title>
		<meta charset="UTF-8"></meta>
		<script>
			function pir(pirID)
			{
				var pir = document.getElementById("pir"+pirID+"_img");
				var on = !(pir.src.match("pir.jpg")=="pir.jpg");
				var newText = on?"0":"1";
				var newImage = on?"pir.jpg":"pir2.jpg";

				document.getElementById("pir"+pirID).innerHTML = newText;
				pir.src = newImage;

				printJSON();
			}
			
			function roleta(roletaID,akcja)
			{
				var roleta = document.getElementById("roleta"+roletaID);

				if (akcja == 1)
					roleta.innerHTML = "W gore";
				else if (akcja == 0)
					roleta.innerHTML = "STOP";
				else if (akcja == -1)
					roleta.innerHTML = "W dol";

				printJSON();
			}
			
			function sliderVal(sliderID)
			{
				var slider = document.getElementById("slider"+sliderID);
				document.getElementById("sliderText"+sliderID).value = slider.value;
				
				printJSON();
			}
			
			function clickBulb(bulbID)
			{
				var bulb = document.getElementById("zarowka"+bulbID+"_img");
				var on = bulb.src.match("zarowka_on.png")=="zarowka_on.png";
				var newText = on?"OFF":"ON";
				var newImage = on?"zarowka_off.png":"zarowka_on.png";

				document.getElementById("zarowka"+bulbID).innerHTML = "Żarówka "+bulbID+": "+newText;
				bulb.src = newImage;

				printJSON();
			}
			
			function printJSON()
			{
				var intelligentHome = {};
				intelligentHome.bulbs = [];
				intelligentHome.servos = [];
				intelligentHome.pirs = [];
				intelligentHome.rolets = [];

				for(var i = 1; i <= 2; i++)
				{
					var bulb = {};
					bulb.id = i;
					bulb.on = document.getElementById("zarowka"+i+"_img").src.match("zarowka_on.png")=="zarowka_on.png";
					
					intelligentHome.bulbs.push(bulb);
				}

				for(var i = 1; i <= 2; i++)
				{
					var pir = {};
					pir.id = i;
					pir.on = document.getElementById("pir"+i+"_img").src.match("pir2.jpg")=="pir2.jpg";
					
					intelligentHome.pirs.push(pir);
				}
				
				for(var i = 1; i <= 1; i++)
				{
					var roleta = {};
					roleta.id = i;
					roleta.on = document.getElementById("roleta"+i+"_img").src.match("roleta.jpg")=="roleta.jpg";
					
					intelligentHome.rolets.push(roleta);
				}
				
				for(var i = 1; i <= 3; i++)
				{
					var servo = {};
					servo.id = i;
					servo.value = document.getElementById("slider"+i).value;
					
					intelligentHome.servos.push(servo);
				}

				document.getElementById("jsonTextArea").value = JSON.stringify(intelligentHome);
				//console.log(JSON.stringify(intelligentHome));
			}
			
			function start()
			{
				printJSON();
			}
		</script>
	</head>
	<body style="text-align:center" onload="start()">
		<input id="slider1" type="range" min="0" max="255" step="1" value="128" oninput="sliderVal(1)" onchange="sliderVal(1)"></input>
		<input id="sliderText1" type="text" size="1" value="128" disabled></input>
		</br>
		</br>
		<input id="slider2" type="range" min="0" max="255" step="1" value="0" oninput="sliderVal(2)" onchange="sliderVal(2)"></input>
		<input id="sliderText2" type="text" size="1" value="0" disabled></input>
		</br>
		</br>
		<input id="slider3" type="range" min="0" max="255" step="1" value="255" oninput="sliderVal(3)" onchange="sliderVal(3)"></input>
		<input id="sliderText3" type="text" size="1" value="255" disabled></input>
		</br>
		</br>
		</br>
		</br>
		<img id="zarowka1_img" src="zarowka_on.png" onclick="clickBulb(1)"></img>
		</br>
		<p id="zarowka1">Żarówka 1: ON</p>
		</br>
		</br>
		</br>
		<img id="zarowka2_img" src="zarowka_on.png" onclick="clickBulb(2)"></img>
		</br>
		<p id="zarowka2">Żarówka 2: ON</p>
		</br>
		</br>

		<img id="pir1_img" src="pir.jpg" onclick="pir(1)" height="250" width="250"></img>
		<p>Czujnik 1</p>
		<p id="pir1"> 0 </p>
		
		<img id="pir2_img" src="pir.jpg" onclick="pir(2)" height="250" width="250"></img>
		<p>Czujnik 2</p>
		<p id="pir2"> 0 </p>
		</br>
		
		
		<img id="roleta1_img" src="roleta.jpg" onclick="roleta(1)" height="250" width="250"></img>
		<p>Roleta</p>
		<button id="w_gore" onclick="roleta(1,1)"> W góre </button>
		<button id="stop" onclick="roleta(1,0)"> Stop </button>
		<button id="w_doł" onclick="roleta(1,-1)"> W dol </button>
		<p id="roleta1"> STOP </p>
		
		</br>
		JSON:
		</br>
		<textarea id="jsonTextArea" style="width:50%"></textarea>
	</body>
</html>